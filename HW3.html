
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.4.js"></script>
 
    <link rel="stylesheet" type="text/css" href="/css/result-light.css">

  <style type="text/css">
    #info {
  position: absolute;
  top: 0px;
  width: 100%;
  padding: 10px;
  text-align: center;
  color: #ffff00
}

#name {
  position: fixed;
  bottom: 40px;
  text-align:center;
  width: 100%;
  color: white;
}

body {
  overflow: hidden;
}
  </style>
  <title>WEB 3D HW3</title>
<script type='text/javascript'>//<![CDATA[
window.onload=function(){
var camera, scene, renderer, mesh, light, controls, loader, l = 1;
var raycaster;
var mouse = new THREE.Vector2();
var pickables = [];
init();
animate();

function init() {
  scene = new THREE.Scene();

  camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);
  camera.position.z = 200;
  camera.lookAt(new THREE.Vector3(25, 0, 25));
  scene.add(camera);
	
  light = new THREE.PointLight(0xffffff, 0.6);
  light.position.set(0, 100, 0);
  scene.add(light);
  
  renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setClearColor(0x888888);

  controls = new THREE.OrbitControls(camera, renderer.domElement);
  loader = new THREE.TextureLoader();
  loader.crossOrigin = '';

  document.body.appendChild(renderer.domElement);
  ////////////////////////////////////////////////////////////////////////
  var geometry = new THREE.PlaneGeometry(100, 50, 32);
  var material = new THREE.MeshLambertMaterial({
    map: loader.load('https://i.imgur.com/o1zDh4T.jpg')
  });
  var plane = new THREE.Mesh(geometry, material);
  plane.rotation.x = -Math.PI / 2;
  plane.receiveShadow = true;
  scene.add(plane);

  mesh = new THREE.Mesh(new THREE.BoxGeometry(100, 25, 2), new THREE.MeshLambertMaterial({
    color: 'white'
  }));
  mesh.castShadow = true;
  mesh.receiveShadow = true;
  mesh1 = mesh.clone();
  mesh.position.set(0, 12.5, 25);
  mesh1.position.set(0, 12.5, -25);
  scene.add(mesh);
  scene.add(mesh1);

  mesh2 = new THREE.Mesh(new THREE.BoxGeometry(2, 25, 50), new THREE.MeshLambertMaterial({
    color: 'white'
  }));
  mesh2.castShadow = true;
  mesh2.receiveShadow = true;
  mesh3 = mesh2.clone();
  mesh2.position.set(49, 12.5, 0);
  mesh3.position.set(-49, 12.5, 0);
  scene.add(mesh2);
  scene.add(mesh3);

  var pic1 = makepicture('https://i.imgur.com/oK60fBq.png',"pic1");
  pic1.position.set(-25, 13, -23);
  scene.add(pic1);
  var pic2 = makepicture('https://i.imgur.com/PiEir4C.jpg',"pic2");
  pic2.position.set(25, 13, -23);
  scene.add(pic2);
  var pic3 = makepicture('https://i.imgur.com/nkmh4I3.jpg',"pic3");
  pic3.position.set(47, 13, 0);
  pic3.rotation.y = -Math.PI / 2;
  scene.add(pic3);
  var pic4 = makepicture('https://i.imgur.com/HhIPL5G.jpg',"pic4");
  pic4.position.set(25, 13, 23);
  pic4.rotation.y = Math.PI;
  scene.add(pic4);
  var pic5 = makepicture('https://i.imgur.com/6Yf4X39.jpg',"pic5");
  pic5.position.set(-25, 13, 23);
  pic5.rotation.y = Math.PI;
  scene.add(pic5);
  var pic6 = makepicture('https://i.imgur.com/3iWsmoF.jpg',"pic6");
  pic6.position.set(-47, 13, 0);
  pic6.rotation.y = Math.PI / 2;
  scene.add(pic6);
  
  pickables.push(pic1,pic2,pic3,pic4,pic5,pic6);
  
  var l1 = makelight(pic1);
  l1.position.set(-25, 25, 22);
  l1.lookAt(new THREE.Vector3(-25, 13, -23));
  scene.add(l1);
  var l2 = makelight(pic2);
  l2.position.set(25, 25, 22);
  l2.lookAt(new THREE.Vector3(25, 13, -23));
  scene.add(l2);
  var l3 = makelight(pic3);
  l3.position.set(10, 25, 0);
  l3.lookAt(new THREE.Vector3(47, 13, 0));
  scene.add(l3);
  var l4 = makelight(pic4);
  l4.position.set(25, 25, -22);
  l4.lookAt(new THREE.Vector3(25, 13, 23));
  scene.add(l4);
  var l5 = makelight(pic5);
  l5.position.set(-25, 25, -22);
  l5.lookAt(new THREE.Vector3(-25, 13, 23));
  scene.add(l5);
  var l6 = makelight(pic6);
  l6.position.set(-10, 25, 0);
  l6.lookAt(new THREE.Vector3(-47, 13, 0));
  scene.add(l6);

  $('#t').click(
    function() {
      if (l === 1) {
        l = 0;
        scene.remove(l1);
        scene.remove(l2);
        scene.remove(l3);
        scene.remove(l4);
        scene.remove(l5);
        scene.remove(l6);
      } else if (l === 0) {
        l = 1;
        scene.add(l1);
        scene.add(l2);
        scene.add(l3);
        scene.add(l4);
        scene.add(l5);
        scene.add(l6);
      }
    }
  );
  var chair = new THREE.Object3D();
  var chair1 = new THREE.Mesh(new THREE.BoxGeometry(20, 1, 5), new THREE.MeshLambertMaterial({
    map: loader.load('https://i.imgur.com/o1zDh4T.jpg')
  }));
  chair1.castShadow = true;
  chair1.receiveShadow = true;
  var chair2 = new THREE.Mesh(new THREE.BoxGeometry(1, 3, 5), new THREE.MeshLambertMaterial({
    map: loader.load('https://i.imgur.com/o1zDh4T.jpg')
  }));
  chair2.castShadow = true;
  chair2.receiveShadow = true;
  var chair3 = chair2.clone();
  chair1.position.set(0,3,0);
  chair2.position.set(9.5,1.5,0);
  chair3.position.set(-9.5,1.5,0);
  chair.add(chair1);
  chair.add(chair2);
  chair.add(chair3);
  scene.add(chair);
  
  raycaster = new THREE.Raycaster();
  document.addEventListener('mousedown', onDocumentMouseDown, false);
}

function onDocumentMouseDown(event) {

  event.preventDefault();
  mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
  mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

  raycaster.setFromCamera(mouse, camera);

  // if recursive set to true, can go deeper into object3D hierarchy 
  //  var intersects = raycaster.intersectObjects( pickables, true );
  var intersects = raycaster.intersectObjects(pickables, true);
  if (intersects.length > 0) {
    if (intersects[0].object.name === "pic1"){
      document.getElementById('name').innerText = '退後,我要開始裝逼了';
    }
    else if (intersects[0].object.name === "pic2"){
      document.getElementById('name').innerText = '在下葉良辰';
    }
    else if (intersects[0].object.name === "pic3"){
      document.getElementById('name').innerText = '我得了一種一上課就犯困一下課就精神的病 圖片來源友情提供:I4B20邱義祥';
    }
    else if (intersects[0].object.name === "pic4"){
      document.getElementById('name').innerText = '大兄弟 上天不?';
    }
    else if (intersects[0].object.name === "pic5"){
      document.getElementById('name').innerText = '少裝逼 多吃藥 少吃零食多睡覺';
    }
    else if (intersects[0].object.name === "pic6"){
      document.getElementById('name').innerText = '藥不能停';
    }

  }

}

function makelight(t) {
  var geometry = new THREE.CylinderGeometry(0.5, 0.5, 2, 32, 32, true);
  var material = new THREE.MeshBasicMaterial({
    color: 'black',
    side: THREE.DoubleSide
  });
  var cylinder = new THREE.Mesh(geometry, material);
  var c1 = new THREE.Mesh(new THREE.CylinderGeometry(0.5, 0.5, 0.1), new THREE.MeshBasicMaterial({
    color: 'white'
  }));
  var c2 = new THREE.Mesh(new THREE.CylinderGeometry(0.5, 0.5, 0.1), new THREE.MeshBasicMaterial({
    color: 'black'
  }));
  cylinder.castShadow = true;
  cylinder.receiveShadow = true;
  cylinder.rotation.x = Math.PI / 2;
  c1.rotation.x = Math.PI / 2;
  c1.position.set(0,0,1);
  c2.rotation.x = Math.PI / 2;
  c2.position.set(0,0,-1);
  var light = new THREE.Object3D();
  var spotLight = new THREE.SpotLight(0xffffff, 0.4);
  spotLight.position.set(0, 0, 0);
  spotLight.castShadow = true;
  spotLight.target = t;
  light.add(spotLight);
  light.add(cylinder);
  light.add(c1);
  light.add(c2);
  return light;
}

function makepicture(url,name) {
  loader.crossOrigin = '';
  var geometry = new THREE.PlaneGeometry(15, 15);
  var material = new THREE.MeshLambertMaterial({
    map: loader.load(url)
  });
  var plane = new THREE.Mesh(geometry, material);
  plane.name = name;
  var picture = new THREE.Object3D();
  var frame1 = new THREE.Mesh(new THREE.BoxGeometry(15, 0.5, 0.5), new THREE.MeshLambertMaterial({
    color: 'red'
  }));
  var frame2 = frame1.clone();
  var frame3 = frame1.clone();
  var frame4 = frame1.clone();
  frame1.position.set(0, 7.5, 0);
  frame2.position.set(0, -7.5, 0);
  frame3.position.set(7.5, 0, 0);
  frame3.rotation.z = Math.PI / 2;
  frame4.position.set(-7.5, 0, 0);
  frame4.rotation.z = Math.PI / 2;
  picture.add(plane);
  picture.add(frame1);
  picture.add(frame2);
  picture.add(frame3);
  picture.add(frame4);
  picture.castShadow = true;
  picture.receiveShadow = true;
  return picture;
}

function animate() {
  //controls.update();
  requestAnimationFrame(animate);
  render();
}

function render() {
  renderer.render(scene, camera);
}

}//]]> 

</script>

  
</head>

<body>
  <button id='t'>toggle</button>
<div id="name">
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/84/three.min.js"></script>
<script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
<script src="https://jyunming-chen.github.io/tutsplus/js/KeyboardState.js"></script>

  
  <script>
  // tell the embed parent frame the height of the content
  if (window.parent && window.parent.parent){
    window.parent.parent.postMessage(["resultsFrame", {
      height: document.body.getBoundingClientRect().height,
      slug: "None"
    }], "*")
  }
</script>

</body>

</html>

