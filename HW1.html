<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.4.js"></script>
<script type='text/javascript'>//<![CDATA[
window.onload=function(){
var count = 0;

function Light(name) {
  if (name === undefined)
    Light.serial = Light.serial !== undefined ? ++Light.serial : 1;
  this.name = name || 'Light' + Light.serial;
  var status = false;
  var open = true;
  count++;
  var i, j = 0,
    it = 1,
    color;
  for (var c = count; c > 1; c--) {
    j += 40
    it *= -1;
  }
  i = 150 + 50 * it;
  if (count % 4 == 1) {
    color = 'yellow'
  } else if (count % 4 == 2) {
    color = 'red'
  } else if (count % 4 == 3) {
    color = 'blue'
  } else if (count % 4 == 0) {
    color = 'green'
  }
  this.op = function() {
    open = !open;
  }
  var n = this.name;
  this.toggle = function animate() {
    if (open === true) {
      status = !status;
      if (status === true) {
        $('#' + n).css('backgroundColor', color)
          .css('border-radius', '50%')
          .css('width', '30px')
          .css('height', '30px')
          .css('position', 'absolute')
          .css('top', i + 'px')
          .css('left', j + 'px');
      } else {
        $('#' + n).css('backgroundColor', 'grey')
          .css('border-radius', '50%')
          .css('width', '30px')
          .css('height', '30px')
          .css('position', 'absolute')
          .css('top', i + 'px')
          .css('left', j + 'px');
      }
    }
    setTimeout(animate, 500);
  }

  this.check = function() {
    return status;
  }
}
for (var i = 1; i <= 10; i++) {
	(function () {
  document.write("<div id='Light" + i + "'></div><button id='toggle" + i + "'>light" + i + "</button>");
	var l1 = new Light();
  l1.toggle();
  $('#toggle'+i).click(function() {
    l1.op()
  });
  })()
}
}//]]> 

</script>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r70/three.min.js"></script>
</body>
</html>
